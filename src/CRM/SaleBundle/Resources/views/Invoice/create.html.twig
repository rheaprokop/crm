{% extends '::sidebar.html.twig' %}
{% set selected = 'sales_manager' %}
{% block javascripts_bottom %}

    <script src="{{ asset('..//bundles/crm/plugins/forms_editors_wysihtml5/js/wysihtml5-0.3.0_rc2.min.js?v=v2.0.0-rc1&amp;sv=v0.0.1.2') }}" type="text/javascript"></script>
    <script src="{{ asset('..//bundles/crm/plugins/forms_editors_wysihtml5/js/bootstrap-wysihtml5-0.0.2.js?v=v2.0.0-rc1&amp;sv=v0.0.1.2') }}" type="text/javascript"></script>
    <script src="{{ asset('..//bundles/crm/components/forms_editors_wysihtml5/wysihtml5.init.js?v=v2.0.0-rc1') }}" type="text/javascript"></script>
    <script src="{{ asset('..//bundles/crm/plugins/forms_elements_select2/js/select2.js?v=v2.0.0-rc1&amp;sv=v0.0.1.2') }}" type="text/javascript"></script>
    <script src="{{ asset('..//bundles/crm/components/forms_elements_select2/select2.init.js?v=v2.0.0-rc1&amp;sv=v0.0.1.2') }}" type="text/javascript"></script>
    <script src="{{ asset('..//bundles/crm/plugins/forms_elements_bootstrap-datepicker/js/bootstrap-datepicker.js?v=v2.0.0-rc1&amp;sv=v0.0.1.2') }}" type="text/javascript"></script>
    <script src="{{ asset('..//bundles/crm/components/forms_elements_bootstrap-datepicker/bootstrap-datepicker.init.js?v=v2.0.0-rc1&amp;sv=v0.0.1.2') }}" type="text/javascript"></script>
    <script src="{{ asset('..//bundles/crm/components/admin_notifications_notyfy/notyfy.init.js?v=v2.0.0-rc1&amp;sv=v0.0.1.2') }}"
    type="text/javascript"></script>
    <script src="{{ asset('..//bundles/crm/plugins/notifications_notyfy/js/jquery.notyfy.js?v=v2.0.0-rc1&amp;sv=v0.0.1.2') }}"
    type="text/javascript"></script> 
    <script src="{{ asset('..//bundles/crm/plugins/ui_modals/bootbox.min.js?v=v2.0.0-rc1&amp;sv=v0.0.1.2') }}"
    type="text/javascript"></script>
    <script src="{{ asset('..//bundles/crm/components/ui_modals/modals.init.js?v=v2.0.0-rc1&amp;sv=v0.0.1.2') }}"
    type="text/javascript"></script>
    <script src="{{ asset('..//bundles/crm/plugins/notifications_gritter/js/jquery.gritter.min.js?v=v2.0.0-rc1&amp;sv=v0.0.1.2') }}"
    type="text/javascript"></script>
    <script src="{{ asset('..//bundles/crm/components/forms_elements_fuelux-radio/fuelux-radio.init.js?v=v2.0.0-rc1&amp;sv=v0.0.1.2') }}" type="text/javascript"></script>
    <script src="{{ asset('..//bundles/crm/components/forms_elements_fuelux-checkbox/fuelux-checkbox.init.js?v=v2.0.0-rc1&amp;sv=v0.0.1.2') }}" type="text/javascript"></script>

    {{ parent() }}
{% endblock %}
{% block body %} 
    {% for flashMessage in app.session.flashbag.get('no_product_notice') %}  
        <script type="text/javascript">
            $(document).ready(function () {
                $("#modal-create-product").modal({keyboard: false, backdrop: 'static'});
                $.gritter.add({
                    title: 'You have no product!',
                    text: "It requires that you enter at least one (1) product to create an invoice."
                });

            });
        </script>   
    {% endfor %} 
    <!-- row -->
    <div class="row row-app margin-none">

        <!-- col -->
        <div class="col-md-12">

            <!-- col-separator -->
            <div class="col-separator col-separator-first box">
                <h4 class="innerAll bg-white margin-none border-bottom">Create Invoice</h4>

                <div class="col-separator-h"></div>
                <!-- Tabs -->
                <div class="widget widget-tabs widget-tabs-social-account widget-tabs-responsive">

                    <div class="widget-body">

                        <!-- Tab content -->
                        <div class="widget-body-regular padding-none border-none">
                            <!-- Widget -->
                            <div class="widget widget-tabs border-bottom-none">
                                <div class="wizard">
                                    <div class="widget widget-tabs widget-tabs-double widget-tabs-responsive">
                                        <!-- Widget heading -->
                                        <div class="widget-head">
                                           Fill up this area to create an invoice
                                        </div>
                                        <!-- // Widget heading END -->
                                        <form  action="{{ path('CRMSaleBundle_sale_invoice_create') }}" method="post" {{ form_enctype(form) }} class="form-horizontal" >

                                            <div class="widget-body">

                                                <div class="tab-content">


                                                    <!-- Row -->
                                                    <div class="row">

                                                        <!-- Column -->
                                                        <div class="col-md-3">
                                                            &nbsp;
                                                        </div>
                                                        <!-- // Column END -->

                                                        <div class="col-md-2">
                                                            &nbsp
                                                        </div>
                                                        <div class="col-md-2">
                                                            &nbsp
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label for="inputTitle">Invoice Date</label>
                                                            {{ form_widget(form.invoiceDate, { 'attr': {'class': 'form-control'} }) }}
                                                            <div class="separator"></div>
                                                        </div>
                                                        <div class="col-md-3">
                                                            <label for="inputTitle">Delivery Date</label>
                                                            {{ form_widget(form.deliveryDate, { 'attr': {'class': 'form-control'} }) }}
                                                            <div class="separator"></div>

                                                        </div>

                                                    </div>
                                                    <!-- // Row END -->
                                                    <!-- Row -->
                                                    <div class="row">

                                                        <!-- Column -->
                                                        <div class="col-md-3">
                                                            <strong>Invoice Info</strong>
                                                            <p class="muted">Enter your basic invoice information. </p>
                                                        </div>
                                                        <!-- // Column END -->

                                                        <div class="col-md-3">
                                                            <label for="inputTitle">Sales Rep</label>
                                                            {{ form_widget(form.salesRep, { 'attr': {'class': 'form-control'} }) }}
                                                            <div class="separator"></div>
                                                        </div> 
                                                        <div class="col-md-3">
                                                            <label for="inputTitle">Sales Order #</label>
                                                            {{ form_widget(form.orderReference, { 'attr': {'class': 'form-control'} }) }}

                                                            <div class="separator"></div>
                                                        </div>
                                                        <div class="col-md-3">
                                                            <label for="inputTitle">PO # </label>
                                                            {{ form_widget(form.poOrder, { 'attr': {'class': 'form-control'} }) }}
                                                            <div class="separator"></div>
                                                        </div>

                                                    </div>
                                                    <!-- // Row END -->
                                                    <hr class="separator bottom" />
                                                    <!-- Row -->
                                                    <div class="row">

                                                        <!-- Column -->
                                                        <div class="col-md-3">
                                                            <strong>Sold To</strong>
                                                            <p class="muted">Sold to person you are sending the invoice.</p>
                                                        </div>
                                                        <!-- // Column END -->

                                                        <div class="col-md-4">
                                                            <label for="inputTitle">Customer</label>
                                                            {{ form_widget(form.invoiceCustomerName, { 'attr': {'class': 'form-control'} }) }}
                                                            <script>
                                                                var account_name = [{% for account in accounts %}
                                                                    "{{account.name}}",{% endfor %}
                                                                    "CandySoft Solutions"
                                                                ];
                                                                $("#invoice_invoiceCustomerName").autocomplete({
                                                                    source: function (request, response) {
                                                                        var matcher = new RegExp("^" + $.ui.autocomplete.escapeRegex(
                                                                                request.term), "i");
                                                                        response($.grep(account_name, function (item) {
                                                                            return matcher.test(item);
                                                                        }));
                                                                    }
                                                                });
                                                            </script>
                                                            <div class="separator"></div>
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label for="inputTitle">Contact Person</label>
                                                            {{ form_widget(form.invoicePerson, { 'attr': {'class': 'form-control'} }) }}
                                                            <script>
                                                                var tags = [{% for contact in contacts %}
                                                                    "{{contact.firstname}} {{contact.lastname}}",{% endfor %}
                                                                    "Rhea"
                                                                ];
                                                                $("#invoice_invoicePerson").autocomplete({
                                                                    source: function (request, response) {
                                                                        var matcher = new RegExp("^" + $.ui.autocomplete.escapeRegex(
                                                                                request.term), "i");
                                                                        response($.grep(tags, function (item) {
                                                                            return matcher.test(item);
                                                                        }));
                                                                    }
                                                                });
                                                            </script>
                                                            <div class="separator"></div>
                                                        </div>
                                                    </div>
                                                    <!-- // Row END -->

                                                    <hr class="separator bottom" />
                                                    <!-- Row -->
                                                    <div class="row">

                                                        <!-- Column -->
                                                        <div class="col-md-3">
                                                            <strong>Invoice Address</strong>
                                                            <p class="muted">Create address where invoice will be sent.</p>
                                                        </div>
                                                        <!-- // Column END -->

                                                        <div class="col-md-2">
                                                            <label for="inputTitle">Street</label>
                                                            {{ form_widget(form.invoiceStreet, { 'attr': {'class': 'form-control'} }) }}
                                                            <div class="separator"></div>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label for="inputTitle">City</label>
                                                            {{ form_widget(form.invoiceCity, { 'attr': {'class': 'form-control'} }) }}
                                                            <div class="separator"></div>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label for="inputTitle">State</label>
                                                            {{ form_widget(form.invoiceState, { 'attr': {'class': 'form-control'} }) }}
                                                            <div class="separator"></div>
                                                        </div>
                                                        <div class="col-md-3">
                                                            <label for="inputTitle">Country</label>
                                                            {{ form_widget(form.invoiceCountry, { 'attr': {'class': 'form-control'} }) }}
                                                            <div class="separator"></div>
                                                        </div>

                                                    </div>
                                                    <!-- // Row END -->

                                                    <!-- Row -->
                                                    <div class="row">

                                                        <!-- Column -->
                                                        <div class="col-md-3">
                                                            &nbsp;
                                                        </div>
                                                        <!-- // Column END -->

                                                        <div class="col-md-2">
                                                            <label for="inputTitle">Phone</label>
                                                            {{ form_widget(form.invoicePhone, { 'attr': {'class': 'form-control'} }) }}
                                                            <div class="separator"></div>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label for="inputTitle">Mobile</label>
                                                            {{ form_widget(form.invoiceMobile, { 'attr': {'class': 'form-control'} }) }}
                                                            <div class="separator"></div>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <label for="inputTitle">Fax</label>
                                                            {{ form_widget(form.invoiceFax, { 'attr': {'class': 'form-control'} }) }}
                                                            <div class="separator"></div>
                                                        </div>
                                                        <div class="col-md-3">
                                                            <label for="inputTitle">Email</label>
                                                            {{ form_widget(form.invoiceEmail, { 'attr': {'class': 'form-control'} }) }}
                                                            <div class="separator"></div>
                                                        </div>

                                                    </div>
                                                    <hr class="separator bottom" /> 

                                                    <!-- Row -->
                                                    <div class="row">

                                                        <!-- Column -->
                                                        <div class="col-md-3">
                                                            <strong>Description</strong>
                                                            <p class="muted">Enter anything you would like to add.</p>
                                                        </div>
                                                        <!-- // Column END -->

                                                        <!-- Column -->
                                                        <div class="col-md-9">
                                                            <label for="textDescription">Description</label>
                                                            {{ form_widget(form.notes, { 'attr': {'class': 'wysihtml5 form-control'} }) }}

                                                        </div>
                                                        <!-- // Column END -->

                                                    </div>
                                                    <!-- // Row END -->
                                                    <!-- Form actions -->
                                                    <div class="separator top center">
                                                        <button type="button" class="btn btn-default"><i class="fa fa-fw fa-times"></i> Cancel</button>

                                                        <button type="submit" class="btn btn-primary"><i class="fa fa-fw fa-check-square-o"></i> Save changes</button>
                                                    </div>
                                                    <!-- // Form actions END -->
                                                    <div class="clearfix"></div>
                                                    <div class="separator"></div>
                                                </div>
                                            </div>

                                            {{ form_rest(form) }}
                                        </form>
                                    </div>
                                </div>
                            </div>
                            <!-- // Widget END -->



                        </div>
                        <!-- // Tab content END -->

                    </div>
                </div>
                <!-- // Tabs END -->
            </div>
            <!-- // END col-separator -->

        </div>
        <!-- // END col -->

    </div>
    <!-- // END row-app -->
    <!-- Modal -->
    <div class="modal fade" id="modal-create-product">

        <div class="modal-dialog">
            <div class="modal-content">

                <!-- Modal heading -->
                <div class="modal-header">  
                    <div class="btn-group btn-group-xs pull-right bottom">
                        <a href="{{ path('CRMSaleBundle_product_create')}}" class="btn btn-primary"><i class="fa fa-fw fa-plus-circle"></i> Go to Product Manager</a>
                    </div>
                    <h3 class="modal-title">Create your first product</h3>
                </div>
                <!-- // Modal heading END -->

                <!-- Modal body -->
                <div class="modal-body">

                    <div class="innerAll">
                        <form  action="{{ path('CRMSaleBundle_invoice_create_product') }}" method="post" {{ form_enctype(form_product) }} class="margin-none innerLR inner-2x">
                            <div class="form-group">
                                <div class="col-md-4">
                                    <label for="inputTitle">Product Name</label>
                                    {{ form_widget(form_product.productname, { 'attr': {'class': 'form-control'} }) }}
                                    <div class="separator"></div>
                                </div>
                                <div class="col-md-4">
                                    <label for="inputTitle">Product Code</label>
                                    {{ form_widget(form_product.productcode, { 'attr': {'class': 'form-control'} }) }}
                                    <div class="separator"></div>
                                </div> 
                                <div class="col-md-4">
                                    <label for="inputTitle">Price</label>
                                    {{ form_widget(form_product.price, { 'attr': {'class': 'form-control'} }) }}  
                                    <div class="separator"></div>
                                </div> 
                            </div>  
                            <div class="form-group">
                                <div class="col-md-4">
                                    <label for="inputTitle">Price Type</label>
                                    {{ form_widget(form_product.pricetype, { 'attr': {'class': 'selectpicker form-control'} }) }}
                                    <div class="separator"></div>
                                </div>   
                                <div class="col-md-4">
                                    <label for="inputTitle">Status</label>
                                    {{ form_widget(form_product.status, { 'attr': {'class': 'selectpicker form-control'} }) }}
                                    <div class="separator"></div>
                                </div>   
                                <div class="col-md-4">
                                    &nbsp; <div class="separator"></div>
                                </div> 
                            </div> 
                            <div class="form-group">
                                <div class="col-md-12">
                                    <label for="inputTitle">Description</label>
                                    {{ form_widget(form_product.description, { 'attr': {'class': 'form-control'} }) }} 
                                    <div class="separator"></div>
                                </div>     
                            </div>
                            <div class="separator line bottom"></div>

                            <!-- Row -->

                            <div class="row"> 

                                <!-- Column -->
                                <div class="col-md-10">
                                    <div>
                                        <h3>Product Category<span>  Select category  that applies.</span></h3>
                                        {% for choice in form_product.Category %}  
                                            <div class="checkbox">
                                                <label for="topic_fuzz" class="checkbox-custom">
                                                    <i class="fa fa-fw fa-square-o"></i> 
                                                    {{ form_widget(choice) }} {{ form_label(choice) }}
                                                </label>
                                            </div>

                                        {% endfor %} 
                                    </div>
                                </div>
                                <!-- // Column END -->

                            </div>
                            <!-- // Row END -->	

                            <div class="separator line bottom"></div>
                            <div class="text-center innerAll">
                                {{ form_widget(form_product.product_save, { 'attr': {'class': 'btn btn-primary finish'} }) }}   <a href="{{ path('CRMSaleBundle_quote_manage')}}" class="btn btn-default">Close</a>
                            </div>
                            {{ form_rest(form_product) }}
                        </form>
                    </div>

                </div>
                <!-- // Modal body END -->

            </div>
        </div>

    </div>
    <!-- // Modal END -->
{% endblock %}



